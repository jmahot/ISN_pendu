<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="../style.css" />
        <title>Le Pendu</title>
        <script language="Javascript" >
            
            var monTableau=["arbre","bouteille","chocolat"];
            /* ex de tableau : var monTableau=["lolal","louloukjhg"];*/
            var n = Math.floor(Math.random() * (monTableau.length)); /*s'il y a -1, le mot chocolat ne sera pas pris ! >_< */
            var motPendu=monTableau[n];
            var tailleMot=motPendu.length;  

            let cachetteVide = new Array();
            var lettresTrouves = 0;
            var coupsRestants = 10;
            var tableauMotPendu= new Array();
            var fini=false;
            var num_image= 0;

            function newCouleur(element,couleur){
                
                element.style.color=couleur;
            }


            function gameplay(element){
                
                if(element.style.color == 'rgba(255, 165, 0, 1)' ||fini){
                    return;
                }
                /*ici on récupère la lettre cliquée*/
                /* prend syntaxe html = comparer après avec lettres du mot*/
                var lettre=element.innerHTML;
                newCouleur(element,'rgba(255, 165, 0, 1)');
                
                var trouve=false;

                for( var i = 0; i<tailleMot; i++){
                    if(tableauMotPendu[i].innerHTML==lettre){
                        alert("oui") /* ne s'affiche pas donc le if n'est pas correct*/
                        tableauMotPendu[i].style.visibility='visible';/* ne fonctionne pas */
                        trouve=true;
                        lettresTrouves++;
                        /*montrer la lettre dans le tableau*/
                    }
                }

                if(!trouve){
                    coupsRestants--;
                    num_image++;
                    document.images['pendu'].src="../images/penduC/pendu_"+num_image+".png";
                    /*afficher nouvelle image du pendu ?
                    continuer le dessin*/
                    
                    if(coupsRestants == 0){
                        alert("OUPS ! VOUS AVEZ PERDU !");/*document.write*/
                        for(var i=0; i<taileMot;i++){
                            tableauMotPendu[i].style.visibility='visible';
                        }
                        fini=true;
                        /*repasser tableau en mode visible*/
                    }
                }

                if(lettresTrouves == tailleMot){
                    alert("VICTOIRE");/*document.write*/
                    fini=true;
                }
            
            }
        </script>
    </head>

    <body>
        <header>
            <a href="../projet.html"><h1 class="barre">Hortografe</h1></a>
            <aside id="header">
                <a href="rules.html">Les règles du jeu</a>
            </aside>
            <nav>
                <ul>
                    <li><a href="../projet.html">Accueil</a></li>
                    <li><a href="https://blogjulietinuviel.wixsite.com/blogprojet" title="Ctrl + clic : ouvrir dans un nouvel onglet">Blog</a></li>
                </ul>
            </nav>
        </header>
        
        <section id="page">
            <h1>Le Jeu du Pendu</h1>
            
            <div id="tout">
                <aside id="clavier">

                    <table id="alphabet">

                        <tr>
                            <td onclick="gameplay(this);" >A</td>
                            <td onclick="gameplay(this);" >B</td>
                            <td onclick="gameplay(this);" >C</td>
                            <td onclick="gameplay(this);" >D</td>
                            <td onclick="gameplay(this);" >E</td>
                            <td onclick="gameplay(this);" >F</td>
                            <td onclick="gameplay(this);" >G</td>
                            <td onclick="gameplay(this);" >H</td>
                            <td onclick="gameplay(this);" >I</td>
                            <td onclick="gameplay(this);" >J</td>
                            <td onclick="gameplay(this);" >K</td>
                            <td onclick="gameplay(this);" >L</td>
                            <td onclick="gameplay(this);" >M</td>
                        </tr>
                        <tr>
                            <td onclick="gameplay(this);" >N</td>
                            <td onclick="gameplay(this);" >O</td>
                            <td onclick="gameplay(this);" >P</td>
                            <td onclick="gameplay(this);" >Q</td>
                            <td onclick="gameplay(this);" >R</td>
                            <td onclick="gameplay(this);" >S</td>
                            <td onclick="gameplay(this);" >T</td>
                            <td onclick="gameplay(this);" >U</td>
                            <td onclick="gameplay(this);" >V</td>
                            <td onclick="gameplay(this);" >W</td>
                            <td onclick="gameplay(this);" >X</td>
                            <td onclick="gameplay(this);" >Y</td>
                            <td onclick="gameplay(this);" >Z</td>
                        </tr>
                        <img name="pendu" class="pendu" src="../images/penduC/pendu_0.png"/>
                    </table>

                </aside>
                  
                <table id="cachette">
                    <tr>
                        <!-- .charAt() récupère rang et renvoi chaine de caractère-->
                        <script language="javascript">
                            
                            for(var i = 0; i<tailleMot; i++){
                                document.write("<td><p id=\""+i+"\">"+ motPendu.charAt(i) + "</p></td>");
                            }

                        </script>
                    </tr>
                </table>
                    
                <script language="Javascript">

                    for(var i=0; i<tailleMot; i++){
                    tableauMotPendu[i]=document.getElementById(i);
                    }

                </script>

                <p class="bold"><a class="recharger" href="javascript:window.location.reload();">
                    Vous voulez recommencer ?
                </a></p>
                <!-- créer lien permettant d'acutaliser page = recharge
                gameplay = fonction javascript qui gère le jeu
                onclick = récupère lettre du tableau qui devient this => paramètre de gameplay-->
            </div>

        </section>

        <div id="piedDePage">
            <footer>
                <p>Fait par Julie Mahot et Tinuviel Croissant</p>
            </footer>

            <div id="bloc_logo_larousse">
                <a id="lien_larousse" href="https://www.larousse.fr/dictionnaires/francais" title="Site Larousse | Ctrl + clic : ouvrir dans un nouvel onglet">
                    <p><img id="img_dico" src="../images/img_dico.png" alt="DicoLarousse"/></p>
                </a>
            </div>

            <audio src="../musics/Jaunter-Reset.mp3" controls loop>Votre navigateur ne semble pas supporter ce fichier.</audio>
        </div>
    </body>
</html>